<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:pro="http://www.liquibase.org/xml/ns/pro" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.1.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd">
    <changeSet author="billdewitt (generated)" id="1619643271471-8">
        <createTable tableName="app">
            <column name="id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="appPK"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
            <column name="name_as_lower" type="VARCHAR(255)"/>
            <column name="app_source_path" type="VARCHAR(255)"/>
            <column name="open_api_spec_filename" type="VARCHAR(255)"/>
            <column name="app_source" type="boolean" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-9">
        <createTable tableName="app_app_source_admins">
            <column name="app_source_id" type="UUID">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="app_source_admins_id" type="UUID">
                <constraints nullable="false" primaryKey="true"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-10">
        <createTable tableName="app_privileges">
            <column name="app_client_user_id" type="UUID">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="privileges_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-11">
        <addUniqueConstraint columnNames="app_source_path" constraintName="UC_APPAPP_SOURCE_PATH_COL" tableName="app"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-12">
        <addUniqueConstraint columnNames="name_as_lower" constraintName="UC_APPNAME_AS_LOWER_COL" tableName="app"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-13">
        <addUniqueConstraint columnNames="name" constraintName="UC_APPNAME_COL" tableName="app"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-14">
        <addForeignKeyConstraint baseColumnNames="app_source_id" baseTableName="app_app_source_admins" constraintName="FK38dmwb6stuhjilm96icyqu5b" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="app" validate="true"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-15">
        <addForeignKeyConstraint baseColumnNames="app_source_admins_id" baseTableName="app_app_source_admins" constraintName="FKhaa6u5by8cons8s5g0788ojap" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="dashboard_user" validate="true"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-16">
        <addForeignKeyConstraint baseColumnNames="app_source_id" baseTableName="meter_value" constraintName="FKhpc5g5uutosd4b77w9rcuh1u" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="app" validate="true"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-17">
        <addForeignKeyConstraint baseColumnNames="privileges_id" baseTableName="app_privileges" constraintName="FKhxryn8uim6vqjed1lbnopp1l4" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="privilege" validate="true"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-18">
        <addForeignKeyConstraint baseColumnNames="app_client_user_id" baseTableName="meter_value" constraintName="FKin5kkqryi4eukyqfgrs0d7xyl" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="app" validate="true"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-19">
        <addForeignKeyConstraint baseColumnNames="app_client_user_id" baseTableName="app_privileges" constraintName="FKkrauiqo64rr6kh1edi19q59a3" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="app" validate="true"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-20">
        <addForeignKeyConstraint baseColumnNames="app_source_id" baseTableName="app_endpoint_privs" constraintName="FKnwk77qnimgcxev9g1ikcom7i2" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="app" validate="true"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-21">
        <addForeignKeyConstraint baseColumnNames="app_client_user_id" baseTableName="app_endpoint_privs" constraintName="FKo6abtx1xmu9c8kc6ya1opq39b" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="app" validate="true"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-22">
        <addForeignKeyConstraint baseColumnNames="app_source_id" baseTableName="app_endpoint" constraintName="FKrvs0utxb1f4sybor9jl9s25y2" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="app" validate="true"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-23">
        <dropForeignKeyConstraint baseTableName="app_endpoint_privs" constraintName="FK193s6kbm3r1lq9m1xtqb8x5pe"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-24">
        <dropForeignKeyConstraint baseTableName="app_client_user_privileges" constraintName="FKb0359mfinfxq2ia5f7y416oo9"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-25">
        <dropForeignKeyConstraint baseTableName="app_endpoint_privs" constraintName="FKdmj6bf0tncgkdkg893ngfnarh"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-26">
        <dropForeignKeyConstraint baseTableName="app_endpoint" constraintName="FKf5kkv6go8cubq0peuhuth3feu"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-27">
        <dropForeignKeyConstraint baseTableName="app_client_user_privileges" constraintName="FKfmhs19ioxlp9xq0jto204dr7p"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-28">
        <dropForeignKeyConstraint baseTableName="meter_value" constraintName="FKfn3dy5rv5j8m2hcvqu2ice4x9"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-29">
        <dropForeignKeyConstraint baseTableName="app_source_app_source_admins" constraintName="FKgqseexiavt85xv00sho8jiulm"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-30">
        <dropForeignKeyConstraint baseTableName="meter_value" constraintName="FKhc3ltbqh86edi63jm39o0felq"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-31">
        <dropForeignKeyConstraint baseTableName="app_source_app_source_admins" constraintName="FKi0oe2wab010nwxji9m1c8oot3"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-32">
        <dropUniqueConstraint constraintName="UK100019-12" tableName="app_source"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-33">
        <dropUniqueConstraint constraintName="UKq926ar1q8uc8370a0naauexdl" tableName="app_source"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-34">
        <dropUniqueConstraint constraintName="appClientUser_nameAsLower_key" tableName="app_client_user"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-35">
        <dropTable tableName="app_client_user"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-36">
        <dropTable tableName="app_client_user_privileges"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-37">
        <dropTable tableName="app_source"/>
    </changeSet>
    <changeSet author="billdewitt (generated)" id="1619643271471-38">
        <dropTable tableName="app_source_app_source_admins"/>
    </changeSet>
</databaseChangeLog>
